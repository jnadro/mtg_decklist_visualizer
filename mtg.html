<!DOCTYPE html>
<meta charset="utf-8">
<style>

body {
  background-color: #7f8c8d;
}

#deck {
  width: 250px;
  height: 350px;
  resize: none;
  background-color: #ecf0f1;
}

#decklist {
  width: 1200px;
  margin: 0 auto;
}

.pile {
  position: relative;
  float: left;
  width: 223px;
  height: 310px;
  margin-right: 10px;
  margin-bottom: 109px;
}

.card {
  position: absolute;
  width: 223px;
  height: 310px;
  border-radius: 13px;
}

.first {
}

.second {
  top: 33px;
}

.third {
  top: 66px;
}

.fourth {
  top: 99px;
}

</style>
<textarea id="deck" autofocus="true" placeholder="Enter cards"></textarea>
<button id="build">Find images</button>
<div id="decklist"></div>
<script src="decklistToJSON.js" charset="utf-8"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/d3/3.5.6/d3.min.js" charset="utf-8"></script>
<script>

var WorldChamp2015 =
"4 Courser of Kruphix\n" +
"3 Den Protector\n" +
"2 Nissa, Vastwood Seer\n" +
"4 Siege Rhino\n" +
"1 Tasigur, the Golden Fang\n" +
"3 Elspeth, Sun's Champion\n" +
"4 Abzan Charm\n" +
"1 Bile Blight\n" +
"3 Hero's Downfall\n" +
"2 Languish\n" +
"1 Silence the Believers\n" +
"4 Thoughtseize\n" +
"1 Tragic Arrogance\n" +
"1 Ultimate Price\n" +
"2 Caves of Koilos\n" +
"3 Forest\n" +
"2 Llanowar Wastes\n" +
"2 Plains\n" +
"4 Sandsteppe Citadel\n" +
"4 Temple of Malady\n" +
"4 Temple of Silence\n" +
"1 Urborg, Tomb of Yawgmoth\n" +
"4 Windswept Heath";

document.getElementById("deck").setAttribute("placeholder", WorldChamp2015);

function drawDecklist(decklist) {
  d3.select("#decklist")
    .selectAll("div")
      .data(decklist)
    .enter().append("div")
      .attr("class", "pile")
    .selectAll("div")
      .data(function(d, i) {
        var array = [];
        for (var i = 0; i < Math.min(d.count, 4); i++) {
          array.push(d);
        }
        return array;
      })
    .enter().append("div")
      .attr("class", function(d, i) {
        var cardClass = ["first", "second", "third", "fourth"]
        return cardClass[i] + " card";
      })
      .style("background", function(d) {
        return "url(" + d.url + ")";
      });  
}

// populate with initial data.
drawDecklist(decklistToJSON(WorldChamp2015));

var btn  = document.getElementById("build");
btn.addEventListener("click", function(event) {
  event.preventDefault();
  document.getElementById("decklist").innerHTML  = "";
  drawDecklist(decklistToJSON(document.getElementById("deck").value));
});

</script>